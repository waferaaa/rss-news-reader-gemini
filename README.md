# RSS News Reader with Gemini AI

Gemini APIを使用してRSSから最新ニュースを取得し、AIが自動生成したタグを付与するWebアプリケーションです。

## 機能概要

- **複数カテゴリ対応**: テクノロジー、ビジネス、エンターテインメント、スポーツの4つのカテゴリから選択可能
- **リアルタイムニュース取得**: RSSフィードから最新のニュースを取得
- **AIタグ自動生成**: Gemini APIが各ニュース記事に対して適切なタグを自動生成
- **動的コンテンツ切り替え**: カテゴリ選択に応じてニュース一覧が動的に更新

## システム構成

```
┌─────────────────────────────────────────────────────────┐
│                    フロントエンド                        │
│              (ブラウザ - HTML/CSS/JavaScript)            │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │  ニュースデータ読込・表示                       │    │
│  │  (ニュース一覧、タグ、メタ情報の表示)           │    │
│  └────────────────────────────────────────────────┘    │
└───────────────────┬─────────────────────────────────────┘
                    │
        カテゴリ切替(トリガー)
                    │
                    ▼
┌─────────────────────────────────────────────────────────┐
│                      バックエンド                         │
│                    (Flask - Python)                      │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │  1. カテゴリに応じたRSSフィードを選択           │    │
│  │  2. RSSからニュース一覧を取得                   │    │
│  │  3. 各ニュースに対してGemini APIでタグ生成      │    │
│  │  4. ニュースデータを生成・整形                   │    │
│  └────────────────────────────────────────────────┘    │
└───────┬───────────────────────────┬──────────────────────┘
        │                           │
        │ ニュース一覧取得           │ タグ付けデータ取得
        │                           │
        ▼                           ▼
┌──────────────┐          ┌──────────────────┐
│     RSS      │          │   Gemini API      │
│  (RSS Feed)  │          │  (タグ生成AI)      │
│              │          │                   │
│ - TechCrunch │          │ - ニュース分析     │
│ - Reuters    │          │ - タグ自動生成     │
│ - ESPN など  │          │ - カテゴリ分類     │
└──────────────┘          └──────────────────┘
        │                           │
        └───────────┬───────────────┘
                    │
                    ▼
        ┌───────────────────┐
        │   ニュースデータ   │
        │  (タイトル、概要、 │
        │   リンク、タグ)    │
        └───────────────────┘
                    │
        ニュースデータ読込・表示
                    │
                    ▼
            ┌───────────┐
            │フロントエンド│
            │  (表示)    │
            └───────────┘
```

## カテゴリ変更から画面表示までのロジック

### 1. カテゴリ選択
ユーザーが画面上のカテゴリボタンをクリックすると、JavaScriptの`selectCategory()`関数が呼び出されます。

### 2. APIリクエスト送信
フロントエンドから`/api/news/<category>`エンドポイントに対してHTTPリクエストが送信されます。

### 3. RSSフィード取得
バックエンドの`get_news()`関数が実行され、選択されたカテゴリに対応するRSSフィードURLのリストから、`fetch_news_from_rss()`関数を使用してニュースを取得します。

```python
# 各カテゴリに対応するRSSフィード
RSS_FEEDS = {
    'technology': ['TechCrunch', 'The Verge', ...],
    'business': ['Reuters', 'Bloomberg', ...],
    'entertainment': ['Entertainment Weekly', ...],
    'sports': ['ESPN', 'BBC Sport', ...]
}
```

### 4. タグ生成処理
取得した各ニュース記事に対して、`generate_tags_with_gemini()`関数が呼び出されます。この関数は：
- ニュースのタイトルと概要をGemini APIに送信
- 「このニュースに適切なタグを3-5個生成してください」というプロンプトを送信
- Gemini APIからの応答をパースしてタグリストを取得

### 5. レスポンス返却
ニュースデータとタグを含むJSONレスポンスがフロントエンドに返されます。

### 6. 画面表示
フロントエンドの`displayNews()`関数が、取得したニュースデータをHTMLに変換して画面に表示します。各ニュースアイテムには：
- タイトル（リンク付き）
- 概要
- 公開日時とソース
- Gemini APIが生成したタグ

が表示されます。

## 必要な環境

- Python 3.8以上
- Gemini APIキー

## インストール手順

### 1. リポジトリのクローン

```bash
git clone <repository-url>
cd <repository-name>
```

### 2. 仮想環境の作成と有効化

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**macOS/Linux:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

### 4. 環境変数の設定

Gemini APIキーを取得し、環境変数として設定します。

**方法1: .envファイルを使用（推奨）**

プロジェクトのルートディレクトリに`.env`ファイルを作成し、以下の内容を記述してください：

```
GEMINI_API_KEY=AIzaSyCog9IpjHIDgD04RgqyADzYAU_5YukSIcw
```

**方法2: 環境変数として直接設定**

**Windows (PowerShell):**
```powershell
$env:GEMINI_API_KEY="your-api-key-here"
```

**Windows (コマンドプロンプト):**
```cmd
set GEMINI_API_KEY=your-api-key-here
```

**macOS/Linux:**
```bash
export GEMINI_API_KEY="your-api-key-here"
```

> **注意**: `.env`ファイルは`.gitignore`に含まれているため、GitHubに公開されません。APIキーを安全に管理できます。

### 5. アプリケーションの起動

```bash
python app.py
```

### 6. ブラウザでアクセス

ブラウザで以下のURLにアクセスします：

```
http://localhost:5000
```

## 使用方法

1. ブラウザでアプリケーションを開く
2. 画面上部のカテゴリボタンから興味のあるカテゴリを選択
3. ローディング中は「ニュースを取得中... Gemini AIがタグを生成しています...」と表示されます
4. ニュース一覧が表示され、各ニュースにはGemini APIが生成したタグが付与されています
5. ニュースタイトルをクリックすると、元の記事ページに遷移します

## 注意事項

- **APIキーの管理**: ソースコードにAPIキーを直接記述しないでください。環境変数を使用するか、`.gitignore`に含まれる設定ファイルを使用してください。
- **処理時間**: 各ニュースに対してGemini APIを呼び出すため、ニュース一覧の表示までに時間がかかることがあります（本仕様上、問題ありません）。
- **API制限**: Gemini APIには利用制限がある場合があります。大量のリクエストを送信する際は注意してください。

## 使用技術

- **バックエンド**: Python, Flask
- **フロントエンド**: HTML, CSS, JavaScript
- **RSS解析**: feedparser
- **AI API**: Google Gemini API (google-generativeai)
- **CORS**: flask-cors

## ライセンス

このプロジェクトは教育目的で作成されています。

## 作成者

[あなたの名前]

## 参考リンク

- [Gemini API ドキュメント](https://ai.google.dev/docs)
- [Flask ドキュメント](https://flask.palletsprojects.com/)
- [feedparser ドキュメント](https://feedparser.readthedocs.io/)

